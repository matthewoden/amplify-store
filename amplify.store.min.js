"use strict";
/*!
 * Amplify Store - Persistent Client-Side Storage 1.1.2
 *
 * Copyright 2011 - 2013 appendTo LLC. (http://appendto.com/team)
 * Dual licensed under the MIT or GPL licenses.
 * http://appendto.com/open-source-licenses
 *
 * http://amplifyjs.com
 */
var store=function(b,d,a){var c=store.type;
if(a&&a.type&&a.type in store.types){c=a.type;}return store.types[c](b,d,a||{});};store.types={};store.type=null;store.addType=function(a,b){if(!store.type){store.type=a;
}store.types[a]=b;store[a]=function(d,f,c){c=c||{};c.type=a;return store(d,f,c);};};store.error=function(){return"amplify.store quota exceeded";};var rprefix=/^__amplify__/;
function createFromStorageInterface(a,b){store.addType(a,function(m,l,n){var d,k,f,g,h=l,c=(new Date()).getTime();if(!m){h={};g=[];f=0;try{m=b.length;while(m=b.key(f++)){if(rprefix.test(m)){k=JSON.parse(b.getItem(m));
if(k.expires&&k.expires<=c){g.push(m);}else{h[m.replace(rprefix,"")]=k.data;}}}while(m=g.pop()){b.removeItem(m);}}catch(j){}return h;}m="__amplify__"+m;
if(l===undefined){d=b.getItem(m);k=d?JSON.parse(d):{expires:-1};if(k.expires&&k.expires<=c){b.removeItem(m);}else{return k.data;}}else{if(l===null){b.removeItem(m);
}else{k=JSON.stringify({data:l,expires:n.expires?c+n.expires:null});try{b.setItem(m,k);}catch(j){store[a]();try{b.setItem(m,k);}catch(j){throw store.error();
}}}}return h;});}for(var webStorageType in {localStorage:1,sessionStorage:1}){try{if(typeof window!=="undefined"){window[webStorageType].setItem("__amplify__","x");
window[webStorageType].removeItem("__amplify__");createFromStorageInterface(webStorageType,window[webStorageType]);}}catch(e){}}if(typeof window!=="undefined"&&!store.types.localStorage&&window.globalStorage){try{createFromStorageInterface("globalStorage",window.globalStorage[window.location.hostname]);
if(store.type==="sessionStorage"){store.type="globalStorage";}}catch(e){}}(function(){if(store.types.localStorage||typeof window=="undefined"){return;}var c=document.createElement("div"),b="amplify";
c.style.display="none";document.getElementsByTagName("head")[0].appendChild(c);try{c.addBehavior("#default#userdata");c.load(b);}catch(a){c.parentNode.removeChild(c);
return;}store.addType("userData",function(o,n,p){c.load(b);var k,m,h,f,g,j=n,d=(new Date()).getTime();if(!o){j={};g=[];f=0;while(k=c.XMLDocument.documentElement.attributes[f++]){m=JSON.parse(k.value);
if(m.expires&&m.expires<=d){g.push(k.name);}else{j[k.name]=m.data;}}while(o=g.pop()){c.removeAttribute(o);}c.save(b);return j;}o=o.replace(/[^\-._0-9A-Za-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c-\u200d\u203f\u2040\u2070-\u218f]/g,"-");
o=o.replace(/^-/,"_-");if(n===undefined){k=c.getAttribute(o);m=k?JSON.parse(k):{expires:-1};if(m.expires&&m.expires<=d){c.removeAttribute(o);}else{return m.data;
}}else{if(n===null){c.removeAttribute(o);}else{h=c.getAttribute(o);m=JSON.stringify({data:n,expires:(p.expires?(d+p.expires):null)});c.setAttribute(o,m);
}}try{c.save(b);}catch(l){if(h===null){c.removeAttribute(o);}else{c.setAttribute(o,h);}store.userData();try{c.setAttribute(o,m);c.save(b);}catch(l){if(h===null){c.removeAttribute(o);
}else{c.setAttribute(o,h);}throw store.error();}}return j;});}());(function(){var c={},a={};function b(d){return d===undefined?undefined:JSON.parse(JSON.stringify(d));
}store.addType("memory",function(f,g,d){if(!f){return b(c);}if(g===undefined){return b(c[f]);}if(a[f]){clearTimeout(a[f]);delete a[f];}if(g===null){delete c[f];
return null;}c[f]=g;if(d.expires){a[f]=setTimeout(function(){delete c[f];delete a[f];},d.expires);}return g;});}());module.exports=store;